<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dsigner - Painel</title>
    <link rel="stylesheet" href="painel.css">
    <style>
        /* Additional styles for new features */
        .new-key-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
        }

        .new-key-btn:hover {
            background: #45a049;
        }

        #text-options textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }

        #text-options label {
            display: inline-block;
            margin-right: 15px;
            margin-top: 10px;
        }

        #activation-key-container {
            display: flex;
            align-items: center;
        }

        .text-message {
            padding: 20px;
            background: #2a2f5b;
            border-radius: 10px;
            color: white;
            font-size: 24px;
            max-width: 80%;
            margin: 0 auto;
            text-align: center;
        }
    </style>
</head>
<body>
    <header class="painel-header">
        <div class="header-content">
            <div class="header-title">
                <h1>Dsigner Painel</h1>
                <p>Digital Signage</p>
            </div>
            <nav class="painel-menu">
                <ul>
                    <li><a href="#tvs" class="nav-link active" data-section="tvs-section">TVs</a></li>
                    <li><a href="#app" class="nav-link" data-section="app-section">App</a></li>
                    <li><a href="#perfil" class="nav-link" data-section="perfil-section">Perfil</a></li>
                    <li><a href="#support" class="nav-link" data-section="support-section">Suporte</a></li>
                    <li><button id="dskey-btn-header" class="dskey-btn-nav">Dskey</button></li>
                    <li><a href="#" id="logout-link">Sair</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="painel-content">
        <section id="tvs-section" class="content-section active">
            <div class="tvs-menu">
                <div class="tvs-content">
                    <div class="floor-list">
                        <button class="select-categories-btn">Gerenciar Andares</button>
                    </div>
                    <div class="content-grid">
                        <h3>Conteúdo</h3>
                        <div class="grid" id="tv-grid"></div>
                        <button class="add-tv-btn">Adicionar TV</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="app-section" class="content-section">
            <div class="app-content">
                <h2>Download do App</h2>
                <div class="demo-area">
                    <h3>Como instalar</h3>
                    <div class="gallery">
                        <img src="/imagens/logo Dsigner 2.png" alt="Screenshot 1">
                        <img src="/imagens/logo_Dsigner_2.png" alt="Screenshot 2">
                    </div>
                </div>
            </div>
        </section>

        <section id="perfil-section" class="content-section">
            <div class="profile-content">
                <h2>Meu Perfil</h2>
                <div class="profile-info">
                    <p><strong>Email:</strong> <span id="user-email"></span></p>
                </div>
            </div>
        </section>

        <section id="support-section" class="content-section">
            <div class="support-content">
                <h2>Suporte Técnico</h2>
                <form id="support-form">
                    <div class="form-group">
                        <label for="support-email">Email:</label>
                        <input type="email" id="support-email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="support-empresa">Nome da Empresa:</label>
                        <input type="text" id="support-empresa" name="empresa" required>
                    </div>
                    <div class="form-group">
                        <label for="support-chamado">Mensagem:</label>
                        <textarea id="support-chamado" name="chamado" required></textarea>
                    </div>
                    <button type="submit">Enviar Chamado</button>
                    <div id="support-message" class="message"></div>
                </form>
            </div>
        </section>
    </main>

    <!-- Modals -->
    <div class="modal" id="category-modal">
        <div class="modal-content">
            <span class="close-btn">×</span>
            <h2>Gerenciar Andares</h2>
            <div class="category-form">
                <h3>Adicionar Novo Andar</h3>
                <div class="form-group">
                    <label for="new-category-name">Nome do Andar:</label>
                    <input type="text" id="new-category-name" placeholder="Ex.: Andar 3">
                </div>
                <button id="add-category-btn">Adicionar Andar</button>
            </div>
            <div class="category-list-modal">
                <h3>Andares Existentes</h3>
                <ul id="existing-categories"></ul>
            </div>
        </div>
    </div>

    <div class="modal" id="edit-floor-modal">
        <div class="modal-content">
            <span class="close-btn">×</span>
            <h2>Editar Andar</h2>
            <div class="form-group">
                <label for="edit-floor-name">Nome do Andar:</label>
                <input type="text" id="edit-floor-name">
            </div>
            <button id="save-floor-btn">Salvar</button>
        </div>
    </div>

    <div class="modal" id="image-control-modal">
        <div class="modal-content">
            <span class="close-btn">×</span>
            <h2>Controle de Imagem</h2>
            <div class="form-group">
                <label for="image-duration-control">Duração (segundos):</label>
                <input type="number" id="image-duration-control" min="1" value="10">
            </div>
            <div class="form-group">
                <label>Pré-visualização:</label>
                <img id="current-image-preview" class="media-preview">
            </div>
            <button id="update-image-btn" class="btn">Atualizar Imagem</button>
            <button id="change-image-btn" class="btn btn-secondary">Alterar Imagem</button>
        </div>
    </div>

    <div class="modal" id="add-tv-modal">
        <div class="modal-content">
            <span class="close-btn">×</span>
            <h2>Adicionar TV</h2>
            <div class="form-group">
                <label for="tv-name">Nome da TV:</label>
                <input type="text" id="tv-name" placeholder="Ex.: TV Sala 1">
            </div>
            <div class="form-group">
                <label for="tv-category">Andar:</label>
                <select id="tv-category"></select>
            </div>
            <div class="form-group">
                <label for="tv-activation-key">Chave de Ativação (opcional):</label>
                <input type="text" id="tv-activation-key" placeholder="Cole a chave do Dskey aqui">
            </div>
            <button id="add-tv-submit-btn" class="btn">Adicionar TV</button>
        </div>
    </div>

    <div class="modal" id="view-media-modal">
        <div class="modal-content">
            <span class="close-btn">×</span>
            <h2>Mídia da TV</h2>
            <div id="media-container"></div>
        </div>
    </div>

    <div class="modal" id="upload-media-modal">
        <div class="modal-content">
            <span class="close-btn">×</span>
            <h2>Enviar Mídia</h2>
            <div class="form-group">
                <label for="media-type">Tipo de Mídia:</label>
                <select id="media-type">
                    <option value="text">Texto</option>
                    <option value="image">Imagem</option>
                    <option value="video">Vídeo</option>
                    <option value="link">Link Externo</option>
                </select>
            </div>
            
            <div id="text-options" class="form-group" style="display:none;">
                <textarea id="text-content" placeholder="Digite sua mensagem..."></textarea>
                <label>Cor do Texto: <input type="color" id="text-color" value="#ffffff"></label>
                <label>Cor de Fundo: <input type="color" id="text-bg-color" value="#1a1f3b"></label>
                <label>Tamanho: 
                    <select id="text-size">
                        <option value="16">Pequeno</option>
                        <option value="24" selected>Médio</option>
                        <option value="32">Grande</option>
                        <option value="48">Extra Grande</option>
                    </select>
                </label>
            </div>
            
            <div class="form-group" id="file-upload-group" style="display:none;">
                <label for="media-file">Arquivo (máx. 10MB):</label>
                <input type="file" id="media-file" accept="image/*, video/*">
                <div class="upload-progress">
                    <div class="progress-bar"></div>
                </div>
                <img id="media-preview" class="media-preview" alt="Pré-visualização">
            </div>
            
            <div class="form-group" id="link-upload-group" style="display:none;">
                <label for="media-link">URL:</label>
                <input type="text" id="media-link" placeholder="https://exemplo.com/imagem.jpg">
            </div>
            
            <div id="image-options" class="form-group" style="display:none;">
                <label for="image-duration">Duração (segundos):</label>
                <input type="number" id="image-duration" value="10" min="1">
            </div>
            
            <div id="video-options" class="form-group" style="display:none;">
                <label>
                    <input type="checkbox" id="video-loop"> Repetir vídeo
                </label>
            </div>
            
            <button id="upload-media-btn" class="btn">Enviar</button>
            <div id="upload-status" class="message"></div>
        </div>
    </div>

    <div class="modal" id="activation-info-modal">
        <div class="modal-content">
            <span class="close-btn">×</span>
            <h2>Informações de Ativação</h2>
            <div class="form-group">
                <label>Chave de Ativação:</label>
                <div id="activation-key-container">
                    <span id="activation-key-info"></span>
                </div>
            </div>
            <div class="form-group">
                <label>Nome do Dispositivo:</label>
                <div class="device-info-value" id="activation-device-info"></div>
            </div>
            <div class="form-group">
                <label>Última Ativação:</label>
                <div class="device-info-value" id="activation-last-info"></div>
            </div>
        </div>
    </div>

    <div class="modal" id="text-message-modal">
        <div class="modal-content">
            <span class="close-btn">×</span>
            <h2>Enviar Mensagem de Texto</h2>
            <div class="form-group">
                <label for="text-message-content">Mensagem:</label>
                <textarea id="text-message-content" rows="4"></textarea>
            </div>
            <div class="form-group">
                <label>Cor do Texto: <input type="color" id="text-color" value="#ffffff"></label>
            </div>
            <div class="form-group">
                <label>Cor de Fundo: <input type="color" id="bg-color" value="#1a1f3b"></label>
            </div>
            <div class="form-group">
                <label>Tamanho da Fonte:
                    <select id="text-size">
                        <option value="16">Pequeno</option>
                        <option value="24" selected>Médio</option>
                        <option value="32">Grande</option>
                        <option value="48">Extra Grande</option>
                    </select>
                </label>
            </div>
            <button id="send-text-btn" class="btn">Enviar Mensagem</button>
        </div><div id="activation-info-modal" class="modal">
            <div class="modal-content">
                <span class="close-btn">&times;</span>
                <h3>Informações de Ativação</h3>
                <div class="info-group">
                    <label>Chave de Ativação:</label>
                    <div id="activation-key-container">
                        <span id="activation-key-info"></span>
                    </div>
                </div>
                <div class="info-group">
                    <label>Dispositivo:</label>
                    <span id="activation-device-info"></span>
                </div>
                <div class="info-group">
                    <label>Última Ativação:</label>
                    <span id="activation-last-info"></span>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
</div><!-- App Script -->
<script src="painel.js"></script>